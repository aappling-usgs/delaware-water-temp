target_default: 2_1_model_fabric

packages:
  - sf
  - yaml
  - nhdplusTools
  - dplyr

sources:
  - 2_1_model_fabric/src/get_nhd.R
  - 2_1_model_fabric/src/get_site_ids.R

targets:
  2_1_model_fabric:
    depends:
      - 2_1_model_fabric/out/nhd_flowline_subset.rds.ind
      - 2_1_model_fabric/out/nhd_waterbody_subset.rds.ind
      - 2_1_model_fabric/out/site_ids.rds.ind

  2_1_model_fabric/out/nhd_flowline_subset.rds.ind:
    command: get_nhd_flowline(
      ind_file = target_name,
      geo_boundary_file = '1_geo_boundary/out/geo_boundary.rds',
      hu_list = huc)

  2_1_model_fabric/out/nhd_waterbody_subset.rds.ind:
    command: get_nhd_waterbody(
      ind_file = target_name,
      geo_boundary_file = '1_geo_boundary/out/geo_boundary.rds',
      hu_list = huc)

  2_1_model_fabric/out/site_ids.rds.ind:
    command: get_site_ids(
      ind_file = target_name,
      nhd_gpkg = '2_1_model_fabric/tmp/02/nhdplus_0204.gpkg')
